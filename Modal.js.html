<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Spark Framework Source: components/modal/Modal.js</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.dark.css">

	<link type="text/css" rel="stylesheet" href="styles/site.spacelab.css">

</head>

<body>
<div class="container-fluid">
	<div class="navbar navbar-fixed-top ">
		<div class="navbar-inner">
			<a class="brand" href="index.html">Spark Framework</a>
			<ul class="nav">
				
				<li class="dropdown">
					<a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b
						class="caret"></b></a>

					<ul class="dropdown-menu inline">
						
						<li>
							<a href="spark.components.Button.html">spark.components.Button</a>
						</li>
						
						<li>
							<a href="spark.components.Checkbox.html">spark.components.Checkbox</a>
						</li>
						
						<li>
							<a href="spark.components.ComboBox.html">spark.components.ComboBox</a>
						</li>
						
						<li>
							<a href="spark.components.DraggableView.html">spark.components.DraggableView</a>
						</li>
						
						<li>
							<a href="spark.components.Field.html">spark.components.Field</a>
						</li>
						
						<li>
							<a href="spark.components.Form.html">spark.components.Form</a>
						</li>
						
						<li>
							<a href="spark.components.Input.html">spark.components.Input</a>
						</li>
						
						<li>
							<a href="spark.components.Label.html">spark.components.Label</a>
						</li>
						
						<li>
							<a href="spark.components.LabeledInput.html">spark.components.LabeledInput</a>
						</li>
						
						<li>
							<a href="spark.components.Modal.html">spark.components.Modal</a>
						</li>
						
						<li>
							<a href="spark.components.Overlay.html">spark.components.Overlay</a>
						</li>
						
						<li>
							<a href="spark.components.Password.html">spark.components.Password</a>
						</li>
						
						<li>
							<a href="spark.components.Radio.html">spark.components.Radio</a>
						</li>
						
						<li>
							<a href="spark.components.Textarea.html">spark.components.Textarea</a>
						</li>
						
						<li>
							<a href="spark.components.TextareaWithCharCounter.html">spark.components.TextareaWithCharCounter</a>
						</li>
						
						<li>
							<a href="spark.components.ToggleSwitch.html">spark.components.ToggleSwitch</a>
						</li>
						
						<li>
							<a href="spark.core.HistoryManager.html">spark.core.HistoryManager</a>
						</li>
						
						<li>
							<a href="spark.core.HistoryManager.TokenTransformer.html">spark.core.HistoryManager.TokenTransformer</a>
						</li>
						
						<li>
							<a href="spark.core.Object.html">spark.core.Object</a>
						</li>
						
						<li>
							<a href="spark.core.Router.html">spark.core.Router</a>
						</li>
						
						<li>
							<a href="spark.core.Store.html">spark.core.Store</a>
						</li>
						
						<li>
							<a href="spark.core.View.html">spark.core.View</a>
						</li>
						
						<li>
							<a href="spark.widgets.SignUp.html">spark.widgets.SignUp</a>
						</li>
						

					</ul>
				</li>
				
			</ul>
		</div>
	</div>

	<div class="row-fluid">

		
			<div class="span12">
				
				<div id="main">
					


		<h1 class="page-title">Source: components/modal/Modal.js</h1>
    
<section>
	<article>
		<pre
			class="sunlight-highlight-javascript linenums">// Generated by github.com/steida/coffee2closure 0.1.9
goog.provide('spark.components.Modal');
goog.require('spark.components.DraggableView');
goog.require('spark.components.Overlay');
goog.require('goog.dom');
goog.require('goog.style');

/**
  Modal view with overlay option for Spark Framework. By default modal will be
  appended to document body and it will have an overlay. When overlay clicked
  the modal will be destroyed. You should pass title and content params of the
  modal in your options. You can also customize buttons. See `@createButtons_`
  for more information.

  @constructor
  @export
  @param   {Object=} options Class options.
  @param   {*=} data Class data
  @extends {spark.components.DraggableView}
 */
spark.components.Modal = function(options, data) {
  var resizeCallback, _ref, _ref1, _ref2, _ref3;
  if (options == null) {
    options = {};
  }
  this.getCssClass(options, 'modal');
  options.title || (options.title = options['title'] || 'Default modal title');
  options.content || (options.content = options['content'] || 'Default modal content');
  options.renderTo || (options.renderTo = options['renderTo'] || document.body);
  options.buttons || (options.buttons = options['buttons'] || spark.components.Modal.Buttons.YES_NO);
  if (options.draggable == null) {
    options.draggable = (_ref = options['draggable']) != null ? _ref : true;
  }
  if (options.overlay == null) {
    options.overlay = (_ref1 = options['overlay']) != null ? _ref1 : true;
  }
  if (options.closable == null) {
    options.closable = (_ref2 = options['closable']) != null ? _ref2 : true;
  }
  if (options.removeOnOverlayClick == null) {
    options.removeOnOverlayClick = (_ref3 = options['removeOnOverlayClick']) != null ? _ref3 : true;
  }
  this.createTitleView_(options.title);
  if (options.draggable) {
    options.handle = this.titleView;
  }
  spark.components.Modal.superClass_.constructor.call(this, options, data);
  this.buttons = {};
  if (options.overlay) {
    this.setOverlay_();
  }
  if (!options.draggable) {
    this.disableDrag();
    this.removeClass('draggable');
  }
  this.appendView(this.titleView);
  this.createContentView_(options.content);
  this.createButtons_(options.buttons);
  if (options.closable) {
    this.createCloseButton_();
  }
  this.setPosition();
  resizeCallback = goog.bind(this.setPosition, this);
  this.resizeListenerKey = goog.events.listen(window, 'resize', resizeCallback);
}
goog.inherits(spark.components.Modal, spark.components.DraggableView);

/**
  Creates modal content.

  @private
  @param {string} title Modal title.
 */
spark.components.Modal.prototype.createTitleView_ = function(title) {
  return this.titleView = new spark.core.View({
    template: title,
    cssClass: 'modal-title'
  });
};

/**
  Creates modal content.

  @private
  @param {string} content Modal content.
 */
spark.components.Modal.prototype.createContentView_ = function(content) {
  return this.contentView = new spark.core.View({
    template: content,
    cssClass: 'modal-content',
    renderTo: this
  });
};

/**
  Creates a close button to top right of the modal.

  @private
 */
spark.components.Modal.prototype.createCloseButton_ = function() {
  return this.closeButton = new spark.core.View({
    cssClass: 'modal-close',
    template: 'x',
    renderTo: this,
    events: {
      click: (function(_this) {
        return function() {
          return _this.destroy();
        };
      })(this)
    }
  });
};

/**
  Creates modal buttons. You can use preset buttons like YES, YES_NO or you
  can pass custom array which contains button options in it. Preset buttons
  will emit `ModalButtonClicked` with button title. You can programatically
  listen that event and look for button title to understand which button is
  clicked. Custom buttons should contain its callback. No other events will be
  fired for custom buttons. All buttons will be stored in `buttons` object
  with its names.

  @private
  @param {spark.components.Modal.Buttons|Array.&lt;Object>} buttons Preset button
  value in Buttons enum or custom buttons array.
 */
spark.components.Modal.prototype.createButtons_ = function(buttons) {
  var presetButtons;
  this.buttonsContainer = new spark.core.View({
    cssClass: 'buttons-container',
    renderTo: this
  });
  presetButtons = goog.object.getValues(spark.components.Modal.Buttons);
  return buttons.forEach((function(_this) {
    return function(options) {
      var button;
      options.renderTo = _this.buttonsContainer;
      button = new spark.components.Button(options);
      _this.buttons[options.title] = button;
      if (presetButtons.indexOf(buttons) > -1) {
        return button.on(goog.events.EventType.CLICK, function() {
          return _this.emit('ModalButtonClicked', options.title);
        });
      }
    };
  })(this));
};

/**
  Sets overlay for modal. Overlay and modal will be destroyed when overlay
  clicked if `removeOnOverlayClick` options is passed true in modal options.

  @private
 */
spark.components.Modal.prototype.setOverlay_ = function() {
  var isRemovable;
  isRemovable = this.getOptions().removeOnOverlayClick;
  this.overlay = new spark.components.Overlay({
    removeOnClick: isRemovable
  });
  if (isRemovable) {
    return this.overlay.once('OverlayRemoved', (function(_this) {
      return function() {
        return _this.removeFromDocument();
      };
    })(this));
  }
};

/**
  Sets left and top values to center modal in the viewport.

  @export
 */
spark.components.Modal.prototype.setPosition = function() {
  var modalElement, modalSize, positionLeft, positionTop, viewportSize;
  viewportSize = goog.dom.getViewportSize(window);
  modalElement = this.getElement();
  modalSize = goog.style.getSize(modalElement);
  positionLeft = Math.max(viewportSize.width / 2 - modalSize.width / 2, 0);
  positionTop = Math.max(viewportSize.height / 2 - modalSize.height / 2, 0);
  return goog.style.setPosition(modalElement, positionLeft, positionTop);
};

/**
  Destroys the modal. Removes all elements from DOM and also unlistens resize
  event handler binded to window to set positions correctly. If your modal
  don't closable or you want to handle close action programatically, when you
  want to remove the modal you should call this method.
 */
spark.components.Modal.prototype.destroy = function() {
  var _ref;
  if ((_ref = this.overlay) != null) {
    _ref.removeFromDocument();
  }
  this.removeFromDocument();
  return goog.events.unlistenByKey(this.resizeListenerKey);
};

/**
  Returns Overlay instance if exists.

  @export
  @return {spark.components.Overlay|null}
 */
spark.components.Modal.prototype.getOverlay = function() {
  return this.overlay || null;
};

/**
  Returns button instance by its title.

  @export
  @param {!string} title Button title.
  @return {spark.components.Button|null}
 */
spark.components.Modal.prototype.getButtonByTitle = function(title) {
  return this.buttons[title] || null;
};

/**
  Returns title view.

  @export
  @return {spark.core.View}
 */
spark.components.Modal.prototype.getTitleView = function() {
  return this.titleView;
};

/**
  Returns content view.

  @export
  @return {spark.core.View}
 */
spark.components.Modal.prototype.getContentView = function() {
  return this.contentView;
};

/**
  Preset button options.

  @private
 */
spark.components.Modal.ButtonOptions = {
  YES: {
    title: 'Yes',
    cssClass: 'small green'
  },
  NO: {
    title: 'No',
    cssClass: 'small red'
  },
  CANCEL: {
    title: 'Cancel',
    cssClass: 'small grey'
  }
};

/**
  Preset buttons enum. Created buttons will emit 'ModalButtonClicked' event
  width button value.

  @export
  @enum {Array.&lt;string>}
 */
spark.components.Modal.Buttons = {
  'YES': [spark.components.Modal.ButtonOptions.YES],
  'NO': [spark.components.Modal.ButtonOptions.NO],
  'YES_NO': [spark.components.Modal.ButtonOptions.NO, spark.components.Modal.ButtonOptions.YES],
  'YES_NO_CANCEL': [spark.components.Modal.ButtonOptions.NO, spark.components.Modal.ButtonOptions.CANCEL, spark.components.Modal.ButtonOptions.YES]
};</pre>
	</article>
</section>





				</div>

				<div class="clearfix"></div>
				<footer>
					
					Spark Framework by Fatih Acet <fatih@fatihacet.com>
					<br />
					
					
		<span class="copyright">
		Copyright © 2014 - Fatih Acet
		</span>
					<br />
					
		<span class="jsdoc-message">
		Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.2</a>
		on 2015-01-07T08:53:28+00:00 using the <a
			href="https://github.com/terryweiss/docstrap">DocStrap template</a>.
		</span>
				</footer>
			</div>

			
			<br clear="both">
		</div>

	</div>
	<!--<script src="scripts/sunlight.js"></script>-->
	<script src="scripts/docstrap.lib.js"></script>
	<script src="scripts/bootstrap-dropdown.js"></script>
	<script src="scripts/toc.js"></script>

	<script>
		$( function () {
			$( "[id*='$']" ).each( function () {
				var $this = $( this );

				$this.attr( "id", $this.attr( "id" ).replace( "$", "__" ) );
			} );

			$( "#toc" ).toc( {
				anchorName  : function ( i, heading, prefix ) {
					return $( heading ).attr( "id" ) || ( prefix + i );
				},
				selectors   : "h1,h2,h3,h4",
				showAndHide : false,
				scrollTo    : "100px"
			} );

			$( "#toc>ul" ).addClass( "nav nav-pills nav-stacked" );
			$( "#main span[id^='toc']" ).addClass( "toc-shim" );
			$( '.dropdown-toggle' ).dropdown();
//			$( ".tutorial-section pre, .readme-section pre" ).addClass( "sunlight-highlight-javascript" ).addClass( "linenums" );

			$( ".tutorial-section pre, .readme-section pre" ).each( function () {
				var $this = $( this );

				var example = $this.find( "code" );
				exampleText = example.html();
				var lang = /{@lang (.*?)}/.exec( exampleText );
				if ( lang && lang[1] ) {
					exampleText = exampleText.replace( lang[0], "" );
					example.html( exampleText );
					lang = lang[1];
				} else {
					lang = "javascript";
				}

				if ( lang ) {

					$this
						.addClass( "sunlight-highlight-" + lang )
						.addClass( "linenums" )
						.html( example.html() );

				}
			} );

			Sunlight.highlightAll( {
				lineNumbers : true,
				showMenu : true,
				enableDoclinks : true
			} );
		} );
	 </script>



	<!--Navigation and Symbol Display-->
	


	<!--Google Analytics-->
	

</body>
</html>
