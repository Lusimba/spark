<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Spark Framework Source: core/Store.js</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.dark.css">

	<link type="text/css" rel="stylesheet" href="styles/site.spacelab.css">

</head>

<body>
<div class="container-fluid">
	<div class="navbar navbar-fixed-top ">
		<div class="navbar-inner">
			<a class="brand" href="index.html">Spark Framework</a>
			<ul class="nav">
				
				<li class="dropdown">
					<a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b
						class="caret"></b></a>

					<ul class="dropdown-menu inline">
						
						<li>
							<a href="spark.components.Button.html">spark.components.Button</a>
						</li>
						
						<li>
							<a href="spark.components.Checkbox.html">spark.components.Checkbox</a>
						</li>
						
						<li>
							<a href="spark.components.ComboBox.html">spark.components.ComboBox</a>
						</li>
						
						<li>
							<a href="spark.components.DraggableView.html">spark.components.DraggableView</a>
						</li>
						
						<li>
							<a href="spark.components.Field.html">spark.components.Field</a>
						</li>
						
						<li>
							<a href="spark.components.Form.html">spark.components.Form</a>
						</li>
						
						<li>
							<a href="spark.components.Input.html">spark.components.Input</a>
						</li>
						
						<li>
							<a href="spark.components.Label.html">spark.components.Label</a>
						</li>
						
						<li>
							<a href="spark.components.LabeledInput.html">spark.components.LabeledInput</a>
						</li>
						
						<li>
							<a href="spark.components.Modal.html">spark.components.Modal</a>
						</li>
						
						<li>
							<a href="spark.components.Overlay.html">spark.components.Overlay</a>
						</li>
						
						<li>
							<a href="spark.components.Password.html">spark.components.Password</a>
						</li>
						
						<li>
							<a href="spark.components.Radio.html">spark.components.Radio</a>
						</li>
						
						<li>
							<a href="spark.components.Textarea.html">spark.components.Textarea</a>
						</li>
						
						<li>
							<a href="spark.components.ToggleSwitch.html">spark.components.ToggleSwitch</a>
						</li>
						
						<li>
							<a href="spark.core.HistorManager.TokenTransformer.html">spark.core.HistorManager.TokenTransformer</a>
						</li>
						
						<li>
							<a href="spark.core.HistoryManager.html">spark.core.HistoryManager</a>
						</li>
						
						<li>
							<a href="spark.core.Object.html">spark.core.Object</a>
						</li>
						
						<li>
							<a href="spark.core.Router.html">spark.core.Router</a>
						</li>
						
						<li>
							<a href="spark.core.Store.html">spark.core.Store</a>
						</li>
						
						<li>
							<a href="spark.core.View.html">spark.core.View</a>
						</li>
						
						<li>
							<a href="spark.widgets.SignUp.html">spark.widgets.SignUp</a>
						</li>
						

					</ul>
				</li>
				
			</ul>
		</div>
	</div>

	<div class="row-fluid">

		
			<div class="span12">
				
				<div id="main">
					


		<h1 class="page-title">Source: core/Store.js</h1>
    
<section>
	<article>
		<pre
			class="sunlight-highlight-javascript linenums">// Generated by github.com/steida/coffee2closure 0.1.9
goog.provide('spark.core.Store');
goog.require('spark.core.Object');
goog.require('spark.validation');
goog.require('goog.structs.Map');

/**

  @constructor
  @export
  @param   {Object=} options Class options.
  @param   {*=} data Class data
  @extends {spark.core.Object}
 */
spark.core.Store = function(options, data) {
  var _ref;
  if (options == null) {
    options = {};
  }
  options.validations || (options.validations = options['validations'] || {});
  if (options.validateWhenConstructed == null) {
    options.validateWhenConstructed = (_ref = options['validateWhenConstructed']) != null ? _ref : true;
  }
  spark.core.Store.superClass_.constructor.call(this, options, data);
  this.map_ = new goog.structs.Map(data);
  if (options.validateWhenConstructed) {
    this.validateAll();
  }
}
goog.inherits(spark.core.Store, spark.core.Object);

/**
  Returns value of the given key from the store.

  @export
  @param {string} key Key to be returned.
  @return {*}
 */
spark.core.Store.prototype.get = function(key) {
  return this.map_.get(key);
};

/**
  Sets a new key value pair into store. It will also make a validation before
  setting the new value. If you set a validation rule in options.validations
  for that property, when validation failed, the property won't be updated.
  Store::set will return no and emit a 'PropertyRejected' event otherwise
  it will return true and it will also emit 'ProperySet'. Both events will
  include key and value. If the key and value passed to set does not related
  with a validation rule, it will directly set to store. This makes validation
  optional.

  @export
  @param {string} key Key to be returned.
  @param {*} value Value of the key.
  @return {boolean} Whether the set is completed or not.
 */
spark.core.Store.prototype.set = function(key, value) {
  var isValid;
  if (!key || (value == null)) {
    return false;
  }
  isValid = true;
  if (this.validate(key, value)) {
    this.map_.set(key, value);
    this.emit('PropertySet', {
      key: key,
      value: value
    });
  } else {
    this.emit('PropertyRejected', {
      key: key,
      value: value
    });
    isValid = false;
  }
  return isValid;
};

/**
  Validates the given value for given key's validation rules.

  @export
  @param {string} key Key to be validated.
  @param {*} value Value of the key to validate.
  @return {boolean} Whether the validation is passed or failed.
 */
spark.core.Store.prototype.validate = function(key, value) {
  var isValid, method, rule, rules, type, validations;
  validations = this.getOptions().validations;
  rules = validations != null ? validations[key] : void 0;
  isValid = true;
  if (!rules) {
    return true;
  }
  for (type in rules) {
    rule = rules[type];
    method = spark.validation.getValidator(type, rule);
    if (!method) {
      throw new Error("Validation type " + type + " does not exist.");
    }
    isValid = method.call(this, value, rule);
    if (!isValid) {
      break;
    }
  }
  return isValid;
};

/**
  Validates all data and throw an error if validation fails.

  @export
 */
spark.core.Store.prototype.validateAll = function() {
  var key, value, _ref;
  _ref = this.getData();
  for (key in _ref) {
    value = _ref[key];
    if (!this.validate(key, value)) {
      throw new Error("Failed to validate store data, " + key + ": " + value);
    }
  }
  return true;
};

/**
  Removes a key from strore.

  @export
  @param {string} key Key to be removed.
  @return {boolean} Whether the key removed or not.
 */
spark.core.Store.prototype.unset = function(key) {
  return this.map_.remove(key);
};

/**
  Removes all keys from store.

  @export
 */
spark.core.Store.prototype.clear = function() {
  return this.map_.clear();
};

/**
  Returns `true` if the store has the given key.

  @export
  @param {string} key Key to be searched in store.
  @return {boolean} Whether the store has the key or not.
 */
spark.core.Store.prototype.has = function(key) {
  return this.map_.containsKey(key);
};

/**
  Returns keys array.

  @export
  @return {Array} Keys array.
 */
spark.core.Store.prototype.getKeys = function() {
  return this.map_.getKeys();
};

/**
  Returns values array.

  @export
  @return {Array} Values array.
 */
spark.core.Store.prototype.getValues = function() {
  return this.map_.getValues();
};</pre>
	</article>
</section>





				</div>

				<div class="clearfix"></div>
				<footer>
					
					Spark Framework by Fatih Acet <fatih@fatihacet.com>
					<br />
					
					
		<span class="copyright">
		Copyright Â© 2014 - Fatih Acet
		</span>
					<br />
					
		<span class="jsdoc-message">
		Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.2</a>
		on 2015-01-04T17:09:25+00:00 using the <a
			href="https://github.com/terryweiss/docstrap">DocStrap template</a>.
		</span>
				</footer>
			</div>

			
			<br clear="both">
		</div>

	</div>
	<!--<script src="scripts/sunlight.js"></script>-->
	<script src="scripts/docstrap.lib.js"></script>
	<script src="scripts/bootstrap-dropdown.js"></script>
	<script src="scripts/toc.js"></script>

	<script>
		$( function () {
			$( "[id*='$']" ).each( function () {
				var $this = $( this );

				$this.attr( "id", $this.attr( "id" ).replace( "$", "__" ) );
			} );

			$( "#toc" ).toc( {
				anchorName  : function ( i, heading, prefix ) {
					return $( heading ).attr( "id" ) || ( prefix + i );
				},
				selectors   : "h1,h2,h3,h4",
				showAndHide : false,
				scrollTo    : "100px"
			} );

			$( "#toc>ul" ).addClass( "nav nav-pills nav-stacked" );
			$( "#main span[id^='toc']" ).addClass( "toc-shim" );
			$( '.dropdown-toggle' ).dropdown();
//			$( ".tutorial-section pre, .readme-section pre" ).addClass( "sunlight-highlight-javascript" ).addClass( "linenums" );

			$( ".tutorial-section pre, .readme-section pre" ).each( function () {
				var $this = $( this );

				var example = $this.find( "code" );
				exampleText = example.html();
				var lang = /{@lang (.*?)}/.exec( exampleText );
				if ( lang && lang[1] ) {
					exampleText = exampleText.replace( lang[0], "" );
					example.html( exampleText );
					lang = lang[1];
				} else {
					lang = "javascript";
				}

				if ( lang ) {

					$this
						.addClass( "sunlight-highlight-" + lang )
						.addClass( "linenums" )
						.html( example.html() );

				}
			} );

			Sunlight.highlightAll( {
				lineNumbers : true,
				showMenu : true,
				enableDoclinks : true
			} );
		} );
	 </script>



	<!--Navigation and Symbol Display-->
	


	<!--Google Analytics-->
	

</body>
</html>
