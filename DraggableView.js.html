<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Spark Framework Source: components/draggable/DraggableView.js</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.dark.css">

	<link type="text/css" rel="stylesheet" href="styles/site.spacelab.css">

</head>

<body>
<div class="container-fluid">
	<div class="navbar navbar-fixed-top ">
		<div class="navbar-inner">
			<a class="brand" href="index.html">Spark Framework</a>
			<ul class="nav">
				
				<li class="dropdown">
					<a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b
						class="caret"></b></a>

					<ul class="dropdown-menu inline">
						
						<li>
							<a href="spark.components.Button.html">spark.components.Button</a>
						</li>
						
						<li>
							<a href="spark.components.Checkbox.html">spark.components.Checkbox</a>
						</li>
						
						<li>
							<a href="spark.components.ComboBox.html">spark.components.ComboBox</a>
						</li>
						
						<li>
							<a href="spark.components.DraggableView.html">spark.components.DraggableView</a>
						</li>
						
						<li>
							<a href="spark.components.Field.html">spark.components.Field</a>
						</li>
						
						<li>
							<a href="spark.components.Form.html">spark.components.Form</a>
						</li>
						
						<li>
							<a href="spark.components.Input.html">spark.components.Input</a>
						</li>
						
						<li>
							<a href="spark.components.Label.html">spark.components.Label</a>
						</li>
						
						<li>
							<a href="spark.components.LabeledInput.html">spark.components.LabeledInput</a>
						</li>
						
						<li>
							<a href="spark.components.Modal.html">spark.components.Modal</a>
						</li>
						
						<li>
							<a href="spark.components.Overlay.html">spark.components.Overlay</a>
						</li>
						
						<li>
							<a href="spark.components.Password.html">spark.components.Password</a>
						</li>
						
						<li>
							<a href="spark.components.Radio.html">spark.components.Radio</a>
						</li>
						
						<li>
							<a href="spark.components.Textarea.html">spark.components.Textarea</a>
						</li>
						
						<li>
							<a href="spark.components.ToggleSwitch.html">spark.components.ToggleSwitch</a>
						</li>
						
						<li>
							<a href="spark.core.HistorManager.TokenTransformer.html">spark.core.HistorManager.TokenTransformer</a>
						</li>
						
						<li>
							<a href="spark.core.HistoryManager.html">spark.core.HistoryManager</a>
						</li>
						
						<li>
							<a href="spark.core.Object.html">spark.core.Object</a>
						</li>
						
						<li>
							<a href="spark.core.Router.html">spark.core.Router</a>
						</li>
						
						<li>
							<a href="spark.core.Store.html">spark.core.Store</a>
						</li>
						
						<li>
							<a href="spark.core.View.html">spark.core.View</a>
						</li>
						
						<li>
							<a href="spark.widgets.SignUp.html">spark.widgets.SignUp</a>
						</li>
						

					</ul>
				</li>
				
			</ul>
		</div>
	</div>

	<div class="row-fluid">

		
			<div class="span12">
				
				<div id="main">
					


		<h1 class="page-title">Source: components/draggable/DraggableView.js</h1>
    
<section>
	<article>
		<pre
			class="sunlight-highlight-javascript linenums">// Generated by github.com/steida/coffee2closure 0.1.9
goog.provide('spark.components.DraggableView');
goog.require('spark.core.View');
goog.require('goog.fx.Dragger');
goog.require('goog.style');
goog.require('goog.dom');

/**
  Draggable view for Spark Framework. It uses battle tested goog.fx.Dragger
  as a drag engine but comes with more fancy methods like containers.
  If you pass a container parameter which should be a DOM element or a View
  instance then the drag will only be allowed inside that container element
  or view. Draggable view listens for window resize and sets its limit again
  to not allow dragging offset of the container. You can also want to unset
  the container if you don't want to force dragging inside an element.
  By default, dragging will be allowed for all element. If you want to use a
  handle pass handle option either a view instance or an element.

  @constructor
  @export
  @param   {Object=} options Class options.
  @param   {*=} data Class data
  @extends {spark.core.View}
 */
spark.components.DraggableView = function(options, data) {
  if (options == null) {
    options = {};
  }
  this.getCssClass(options, 'draggable');
  
/**
    If you want to constrain drag inside an element, pass this option either
    a View instance or a DOM element.
   */
  options.container || (options.container = options['container'] || null);
  
/**
    To create a handle for draggable element, pass a View instance or DOM
    element to handle option. Make sure that, you appended handle view/element
    to this component. For now Spark won't append it for you.
   */
  options.handle || (options.handle = options['handle'] || null);
  
/**
    To constrain dragging only one axis, pass this option either x or y.
    Orientation can be `x` or `y`. If you want to allow dragging in both way
    you can call `@setAxis` with `null` parameter.
   */
  options.axis || (options.axis = options['axis'] || null);
  spark.components.DraggableView.superClass_.constructor.call(this, options, data);
  this.createDragger_();
  this.setAxis(options.axis);
  if (options.container) {
    this.setContainer(options.container);
  }
  goog.events.listen(window, 'resize', (function(_this) {
    return function() {
      return _this.setLimits_();
    };
  })(this));
  this.once('ViewHasParent', (function(_this) {
    return function() {
      return _this.setLimits_();
    };
  })(this));
}
goog.inherits(spark.components.DraggableView, spark.core.View);

/**
  Sets drag limits relative to container element. This means dragging won't be
  available outside of that container element.

  @private
 */
spark.components.DraggableView.prototype.setLimits_ = function() {
  var bounds, container, element, sizes;
  if (!this.getContainer()) {
    return;
  }
  element = this.getElement();
  if (!element.parentNode) {
    return;
  }
  container = this.getContainer();
  sizes = goog.style.getSize(element);
  bounds = goog.style.getBounds(container);
  bounds.width = bounds.width - sizes.width;
  bounds.height = bounds.height - sizes.height;
  return this.dragger_.setLimits(bounds);
};

/**
  Set container to force dragging inside that container element.

  @export
  @param {spark.core.View|Node} container Container to force dragging.
 */
spark.components.DraggableView.prototype.setContainer = function(container) {
  if (container instanceof spark.core.View) {
    this.container = container.getElement();
  } else if (goog.dom.isElement(container)) {
    this.container = container;
  } else {
    throw new Error('Drag container must be a View instance or a DOM element.');
  }
  return this.setLimits_();
};

/**
  Unset container to free dragging area.

  @export
 */
spark.components.DraggableView.prototype.unsetContainer = function() {
  this.container = null;
  return this.dragger_.setLimits(new goog.math.Rect(NaN, NaN, NaN, NaN));
};

/**
  Returns drag container.

  @export
  @return {Element}
 */
spark.components.DraggableView.prototype.getContainer = function() {
  return this.container;
};

/**
  Set dragging enabled.

  @export
 */
spark.components.DraggableView.prototype.enableDrag = function() {
  return this.dragger_.setEnabled(true);
};

/**
  Set dragging disabled. Users won't be able to drag the element unless
  `enableDrag` called.

  @export
 */
spark.components.DraggableView.prototype.disableDrag = function() {
  return this.dragger_.setEnabled(false);
};

/**
  Returns handle element if exists.

  @private
  @return {Element|null}
 */
spark.components.DraggableView.prototype.getHandleElement_ = function() {
  var handle;
  handle = this.getOptions().handle;
  if (handle instanceof spark.core.View) {
    return handle.getElement();
  } else if (goog.dom.isElement(handle)) {
    return handle;
  }
  return handle;
};

/**
  Creates an instance of `goog.fx.Dragger` to operate on it.

  @private
 */
spark.components.DraggableView.prototype.createDragger_ = function() {
  var element;
  this.dragger_ = new goog.fx.Dragger(this.getElement(), this.getHandleElement_());
  element = this.getElement();
  
/*
    Override default action to constrain dragging in only one axis.
   */
  return this.dragger_.defaultAction = (function(_this) {
    return function(dragX, dragY) {
      var axis, position, x, y, _ref;
      axis = _this.getAxis();
      _ref = spark.components.DraggableView.Axes, x = _ref.x, y = _ref.y;
      position = goog.style.getPosition(element);
      if (axis === y) {
        dragX = position.x;
      } else if (axis === x) {
        dragY = position.y;
      }
      return goog.style.setPosition(element, dragX, dragY);
    };
  })(this);
};

/**
  Set allowed drag axis. Orientation should be `x` or `y`.
  If you want to remove axis lock after set the axis you can
  call this method with a `null` parameter.

  @export
  @param {spark.components.DraggableView.Axes|null} axis Allowed
  drag axis. Use `null` to remove axis lock.
 */
spark.components.DraggableView.prototype.setAxis = function(axis) {
  return this.axis = axis || null;
};

/**
  Returns draw allowed axis. If it returns `null` drag will be allowed
  in both way.

  @export
  @return {spark.components.DraggableView.Axes|null} axis Drag
  allowed axis.
 */
spark.components.DraggableView.prototype.getAxis = function() {
  return this.axis;
};

/**
  Orientatons enum.

  @enum {string}
  @export
 */
spark.components.DraggableView.Axes = {
  'x': 'x',
  'y': 'y'
};</pre>
	</article>
</section>





				</div>

				<div class="clearfix"></div>
				<footer>
					
					Spark Framework by Fatih Acet <fatih@fatihacet.com>
					<br />
					
					
		<span class="copyright">
		Copyright © 2014 - Fatih Acet
		</span>
					<br />
					
		<span class="jsdoc-message">
		Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.2</a>
		on 2015-01-02T02:16:04+00:00 using the <a
			href="https://github.com/terryweiss/docstrap">DocStrap template</a>.
		</span>
				</footer>
			</div>

			
			<br clear="both">
		</div>

	</div>
	<!--<script src="scripts/sunlight.js"></script>-->
	<script src="scripts/docstrap.lib.js"></script>
	<script src="scripts/bootstrap-dropdown.js"></script>
	<script src="scripts/toc.js"></script>

	<script>
		$( function () {
			$( "[id*='$']" ).each( function () {
				var $this = $( this );

				$this.attr( "id", $this.attr( "id" ).replace( "$", "__" ) );
			} );

			$( "#toc" ).toc( {
				anchorName  : function ( i, heading, prefix ) {
					return $( heading ).attr( "id" ) || ( prefix + i );
				},
				selectors   : "h1,h2,h3,h4",
				showAndHide : false,
				scrollTo    : "100px"
			} );

			$( "#toc>ul" ).addClass( "nav nav-pills nav-stacked" );
			$( "#main span[id^='toc']" ).addClass( "toc-shim" );
			$( '.dropdown-toggle' ).dropdown();
//			$( ".tutorial-section pre, .readme-section pre" ).addClass( "sunlight-highlight-javascript" ).addClass( "linenums" );

			$( ".tutorial-section pre, .readme-section pre" ).each( function () {
				var $this = $( this );

				var example = $this.find( "code" );
				exampleText = example.html();
				var lang = /{@lang (.*?)}/.exec( exampleText );
				if ( lang && lang[1] ) {
					exampleText = exampleText.replace( lang[0], "" );
					example.html( exampleText );
					lang = lang[1];
				} else {
					lang = "javascript";
				}

				if ( lang ) {

					$this
						.addClass( "sunlight-highlight-" + lang )
						.addClass( "linenums" )
						.html( example.html() );

				}
			} );

			Sunlight.highlightAll( {
				lineNumbers : true,
				showMenu : true,
				enableDoclinks : true
			} );
		} );
	 </script>



	<!--Navigation and Symbol Display-->
	


	<!--Google Analytics-->
	

</body>
</html>
